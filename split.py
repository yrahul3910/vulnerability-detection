from pathlib import Path


def main(program: str):
    data_dir = Path(f'./data/processed/{program}')

    with open(data_dir / 'cpp/path_contexts.csv', 'r') as f:
        lines = f.readlines()

    train_split = 0.75
    test_split = 0.15
    val_split = 0.10

    with open(data_dir / 'dataset.train.txt', 'w') as f:
        to_write = lines[:int(train_split * len(lines))]
        f.writelines(to_write)

    with open(data_dir / 'dataset.test.txt', 'w') as f:
        to_write = lines[
            int(train_split * len(lines)):
            int((train_split + test_split) * len(lines))]
        f.writelines(to_write)

    with open(data_dir / 'dataset.val.txt', 'w') as f:
        to_write = lines[-int(val_split * len(lines)):]
        f.writelines(to_write)


if __name__ == '__main__':
    main('ffmpeg')
    main('qemu')
