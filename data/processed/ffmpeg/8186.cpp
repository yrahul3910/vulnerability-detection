static int get_audio_frame_size(AVCodecContext *enc, int size)

{

    int frame_size;



    if(enc->codec_id == CODEC_ID_VORBIS)

        return -1;



    if (enc->frame_size <= 1) {

        int bits_per_sample = av_get_bits_per_sample(enc->codec_id);



        if (bits_per_sample) {

            if (enc->channels == 0)

                return -1;

            frame_size = (size << 3) / (bits_per_sample * enc->channels);

        } else {

            /* used for example by ADPCM codecs */

            if (enc->bit_rate == 0)

                return -1;

            frame_size = (size * 8 * enc->sample_rate) / enc->bit_rate;

        }

    } else {

        frame_size = enc->frame_size;

    }

    return frame_size;

}
